<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal Game Test</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #1a1a2e;
            overflow: hidden;
        }
        #test-canvas {
            display: block;
            width: 100vw;
            height: 100vh;
            background: #2a2a3e;
        }
        #debug {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.8);
            color: #4ecca3;
            padding: 10px;
            font-family: monospace;
            font-size: 12px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="debug">Loading...</div>
    <canvas id="test-canvas"></canvas>

    <script>
        const debug = document.getElementById('debug');
        const canvas = document.getElementById('test-canvas');
        const ctx = canvas.getContext('2d');

        function log(msg) {
            console.log(msg);
            debug.innerHTML += '<br>' + msg;
        }

        log('ðŸŽ® Starting minimal test...');

        // Resize canvas
        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            log(`Canvas sized: ${canvas.width}x${canvas.height}`);
        }
        resize();
        window.addEventListener('resize', resize);

        // Player
        const player = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            width: 32,
            height: 32,
            color: '#FF6B9D',
            vx: 0,
            vy: 0,
            speed: 200
        };

        log(`Player at: ${player.x}, ${player.y}`);

        // Input
        const keys = {};
        window.addEventListener('keydown', e => {
            keys[e.key] = true;
            log(`Key down: ${e.key}`);
        });
        window.addEventListener('keyup', e => keys[e.key] = false);

        // Game loop
        let lastTime = performance.now();
        let frameCount = 0;

        function gameLoop(currentTime) {
            const deltaTime = (currentTime - lastTime) / 1000;
            lastTime = currentTime;
            frameCount++;

            if (frameCount === 1) {
                log('âœ… Game loop started!');
            }

            // Update player
            player.vx = 0;
            player.vy = 0;
            if (keys['w'] || keys['ArrowUp']) player.vy = -1;
            if (keys['s'] || keys['ArrowDown']) player.vy = 1;
            if (keys['a'] || keys['ArrowLeft']) player.vx = -1;
            if (keys['d'] || keys['ArrowRight']) player.vx = 1;

            // Normalize diagonal
            if (player.vx !== 0 && player.vy !== 0) {
                player.vx *= 0.707;
                player.vy *= 0.707;
            }

            player.x += player.vx * player.speed * deltaTime;
            player.y += player.vy * player.speed * deltaTime;

            // Keep in bounds
            player.x = Math.max(16, Math.min(player.x, canvas.width - 16));
            player.y = Math.max(16, Math.min(player.y, canvas.height - 16));

            // Draw
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Grid
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
            ctx.lineWidth = 1;
            for (let x = 0; x < canvas.width; x += 32) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            for (let y = 0; y < canvas.height; y += 32) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }

            // Draw player
            ctx.fillStyle = player.color;
            ctx.fillRect(
                player.x - player.width / 2,
                player.y - player.height / 2,
                player.width,
                player.height
            );
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 2;
            ctx.strokeRect(
                player.x - player.width / 2,
                player.y - player.height / 2,
                player.width,
                player.height
            );

            // FPS
            if (frameCount % 60 === 0) {
                const fps = Math.round(1 / deltaTime);
                debug.innerHTML = `FPS: ${fps}<br>Player: ${Math.round(player.x)}, ${Math.round(player.y)}<br>Press WASD to move`;
            }

            requestAnimationFrame(gameLoop);
        }

        log('Starting game loop...');
        gameLoop(performance.now());
    </script>
</body>
</html>

